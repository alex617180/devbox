# PHP Devbox: –ª–æ–∫–∞–ª—å–Ω–∞—è —Å—Ä–µ–¥–∞ –¥–ª—è Laravel/Node

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è Docker‚Äë—Å—Ä–µ–¥–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö PHP/Laravel –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å –µ–¥–∏–Ω—ã–º MySQL –∏ —É–¥–æ–±–Ω—ã–º–∏ —à–æ—Ä—Ç–∫–∞—Ç–∞–º–∏ –¥–ª—è `artisan`, `vite`, `composer`, `npm`. –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Linux/macOS/WSL.

‚Äî services: `workspace` (PHP + Node + Composer + Xdebug) –∏ `mysql`
‚Äî –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä–Ω–µ–≤–∞—è –ø–∞–ø–∫–∞ —Å –≤–∞—à–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `../`)
‚Äî –∞–≤—Ç–æ–ø–æ–¥–±–æ—Ä —Å–≤–æ–±–æ–¥–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤ –¥–ª—è `artisan serve` –∏ Vite

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker –∏ Docker Compose
- –ü–∞–ø–∫–∞ —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω–∞—è —Ä—è–¥–æ–º —Å devbox (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è `../`)

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
1) –ü–æ–¥–Ω–∏–º–∏—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏–∑ –ø–∞–ø–∫–∏ devbox:

   `docker compose up -d --build`

2) –ó–∞–π–¥–∏—Ç–µ –≤ –ª—é–±–æ–π –ø—Ä–æ–µ–∫—Ç (–∏–∑ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–∞–ø–∫–∏ `../`, –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –æ–Ω –±—É–¥–µ—Ç –∫–∞–∫ `/var/www/<project>`):

   `workon my-project`

   –í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Ç–∏–ø–æ–≤—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é Laravel:
   - `composer install`
   - `cp .env.example .env`
   - `php artisan key:generate`
   - (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ `.env` –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ MySQL –∏–∑ devbox: `DB_HOST=mysql`, `DB_PORT=3306`, `DB_USERNAME=laravel`, `DB_PASSWORD=secret`, `DB_DATABASE=<–∏–º—è_–±–¥>`

3) –ó–∞–ø—É—Å—Ç–∏—Ç–µ Laravel –∏ Vite –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:

   `dev my-project`

   –ò–ª–∏ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏:
   - `serve my-project 8001`
   - `vite  my-project 5175`

–°—Å—ã–ª–∫–∏ –±—É–¥—É—Ç –≤ –≤—ã–≤–æ–¥–µ: `http://localhost:<–ø–æ—Ä—Ç>`.

## –°–æ—Å—Ç–∞–≤ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- workspace: PHP `${PHP_TAG:-8.3-cli}`, Node `${NODE_MAJOR:-20}`, Composer, Xdebug; —Ä–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `/var/www`
- mysql: –æ–±—Ä–∞–∑ `mysql:8.4`, –ø—Ä–æ–±—Ä–æ—à–µ–Ω –ø–æ—Ä—Ç `${MYSQL_PORT:-3306}`
- volumes: `mysql_data`, `composer_cache`, `node_cache`
- –ø–æ—Ä—Ç—ã –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π: `${APP_PORT}`; –¥–ª—è Vite: `${VITE_PORT}` (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ .env)

–§–∞–π–ª—ã:
- `docker-compose.yml` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤
- `workspace/Dockerfile` ‚Äî PHP/Node/Composer/Xdebug
- `workspace/xdebug.ini` ‚Äî –∫–æ–Ω—Ñ–∏–≥ Xdebug
- `.env.example` ‚Äî –ø—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫ devbox
- `bin/*` ‚Äî —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (devbox/.env)
- `HOST_PROJECTS_DIR` ‚Äî —á—Ç–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ `/var/www` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `../`)
- `PHP_TAG` ‚Äî –≤–µ—Ä—Å–∏—è PHP –¥–ª—è workspace (–Ω–∞–ø—Ä–∏–º–µ—Ä, `8.2-cli`, `8.3-cli`)
- `NODE_MAJOR` ‚Äî –º–∞–∂–æ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è Node (–Ω–∞–ø—Ä–∏–º–µ—Ä, `18`, `20`, `22`)
- `MYSQL_PORT` ‚Äî –≤–Ω–µ—à–Ω–∏–π –ø–æ—Ä—Ç MySQL
- `APP_PORT` ‚Äî —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –¥–ª—è PHP‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Compose)
- `VITE_PORT` ‚Äî —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –¥–ª—è Vite (Compose)
- `APP_PORT_RANGE` ‚Äî –¥–∏–∞–ø–∞–∑–æ–Ω –ø–æ—Ä—Ç–æ–≤ –¥–ª—è –∞–≤—Ç–æ–ø–æ–¥–±–æ—Ä–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–∞–º–∏ –µ—Å–ª–∏ `APP_PORT` –Ω–µ –∑–∞–¥–∞–Ω
- `VITE_PORT_RANGE` ‚Äî –¥–∏–∞–ø–∞–∑–æ–Ω –ø–æ—Ä—Ç–æ–≤ –¥–ª—è –∞–≤—Ç–æ–ø–æ–¥–±–æ—Ä–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–∞–º–∏ –µ—Å–ª–∏ `VITE_PORT` –Ω–µ –∑–∞–¥–∞–Ω
- `XDEBUG_MODE` ‚Äî —Ä–µ–∂–∏–º Xdebug (`debug`, `off`, ‚Ä¶)

–í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–º–µ—é—Ç –¥–µ—Ñ–æ–ª—Ç—ã; –º–æ–∂–Ω–æ –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å `.env`, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å `.env.example` –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–¥—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å.

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö MySQL
- –•–æ—Å—Ç/–ø–æ—Ä—Ç –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤: `DB_HOST=mysql`, `DB_PORT=3306`
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/–ø–∞—Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `laravel`/`secret` (–º–µ–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `.env` devbox)
- –†—É—Ç‚Äë–¥–æ—Å—Ç—É–ø –¥–ª—è —É—Ç–∏–ª–∏—Ç: `root`/`$DB_ROOT_PASSWORD` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `root`)

–°–æ–∑–¥–∞—Ç—å –ë–î –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞:
`db-ensure my-project [–∏–º—è_–±–¥] [db_user] [db_password]`

–ï—Å–ª–∏ –∏–º—è –ë–î –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏–º—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–º–µ–Ω–∏ –ø–∞–ø–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –±–µ—Ä—É—Ç—Å—è –∏–∑ devbox/.env (`DB_USERNAME`/`DB_PASSWORD`) –∏–ª–∏ `laravel`/`secret`. –ú–æ–∂–Ω–æ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–∞—Ä–æ–ª—å —Ç—Ä–µ—Ç—å–∏–º –∏ —á–µ—Ç–≤–µ—Ä—Ç—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏. –ö–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—Å—Ç –ë–î, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–µ—Å–ª–∏ –Ω–µ—Ç) –∏ –≤—ã–¥–∞—Å—Ç –ø—Ä–∞–≤–∞.

–ü—Ä–∏–º–µ—Ä—ã:
- `db-ensure my-app` ‚Äî –ë–î `my_app`, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑ `.env` –∏–ª–∏ `laravel/secret`
- `db-ensure my-app shop_db` ‚Äî –ë–î `shop_db`, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- `db-ensure my-app shop_db shop_user s3cr3t` ‚Äî –ë–î `shop_db`, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `shop_user` —Å –ø–∞—Ä–æ–ª–µ–º `s3cr3t`

–û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª—å MySQL:
`dbsh`

–ú–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –ª–æ–≥–∏–Ω–æ–º/–ø–∞—Ä–æ–ª–µ–º –∏ –±–∞–∑–æ–π —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `DB_USERNAME`, `DB_PASSWORD`, `DB_DATABASE` –≤ devbox/.env.

## –ü–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (`bin/*`)
- `workon <project>`: –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –æ–±–æ–ª–æ—á–∫–∞ –≤ `/var/www/<project>` –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ workspace
- `dev <project>`: –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å—Ä–∞–∑—É `artisan serve` –∏ `vite` –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –ø–æ—Ä—Ç–∞—Ö, –ø–æ–∫–∞–∑–∞—Ç—å —Å—Å—ã–ª–∫–∏
- `serve <project> [port]`: —Ç–æ–ª—å–∫–æ Laravel (`php artisan serve --host=0.0.0.0 --port=<port>`)
- `vite <project> [port]`: —Ç–æ–ª—å–∫–æ Vite (`npm run dev -- --host --strictPort --port <port>`)
- `stop <project>`: –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã `serve` –∏ `vite` –ø—Ä–æ–µ–∫—Ç–∞, –æ—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏
- `ps <project>`: –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã `serve`/`vite` –≤–Ω—É—Ç—Ä–∏ workspace –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞
- `logs <project> [all|serve|vite]`: –≤—ã–≤–µ—Å—Ç–∏ —Ö–≤–æ—Å—Ç—ã –ª–æ–≥–æ–≤ `/tmp/*-<project>-*.log`
- `composer <project> ‚Ä¶`: –≤—ã–ø–æ–ª–Ω–∏—Ç—å `composer ‚Ä¶` –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
- `npm <project> ‚Ä¶`: –≤—ã–ø–æ–ª–Ω–∏—Ç—å `npm ‚Ä¶` –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
- `use-php <8.2-cli|8.3-cli|‚Ä¶>`: —Å–º–µ–Ω–∏—Ç—å –≤–µ—Ä—Å–∏—é PHP (–ø–µ—Ä–µ—Å–æ–±–µ—Ä—ë—Ç workspace)
- `use-node <18|20|22>`: —Å–º–µ–Ω–∏—Ç—å –º–∞–∂–æ—Ä–Ω—É—é –≤–µ—Ä—Å–∏—é Node (–ø–µ—Ä–µ—Å–æ–±–µ—Ä—ë—Ç workspace)

–ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `docker compose exec` —Å —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π –ø—Ä–æ–µ–∫—Ç–∞ –∏ UID/GID —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —á—Ç–æ–±—ã –Ω–µ –ª–æ–º–∞—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª–∞—Ö.

## Xdebug
- –ö–æ–Ω—Ñ–∏–≥ –≤ `workspace/xdebug.ini`; –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á—ë–Ω `xdebug.mode=${XDEBUG_MODE:-debug}`
- –ö–ª–∏–µ–Ω—Ç: `host.docker.internal:9003` (–¥–æ–±–∞–≤–ª–µ–Ω `extra_hosts` –¥–ª—è Linux)
- –î–ª—è IDE (PhpStorm/VSC): –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—É—Ç—å‚Äë–º–∞–ø–ø–∏–Ω–≥ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ `/var/www/<project>`; `PHP_IDE_CONFIG=serverName=php-devbox`

–ß—Ç–æ–±—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å Xdebug: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `XDEBUG_MODE=off` –≤ devbox/.env –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ workspace (`docker compose up -d workspace`).

## –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
‚Äî –ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç Laravel –≤ –ø–∞–ø–∫–µ `../my-api`:
1. `docker compose up -d --build`
2. `workon my-api`
3. `composer create-project laravel/laravel .`
4. `db-ensure my-api my_api`
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `.env` –ø—Ä–æ–µ–∫—Ç–∞: `DB_HOST=mysql`, `DB_PORT=3306`, `DB_DATABASE=my_api`, `DB_USERNAME=laravel`, `DB_PASSWORD=secret`
6. `dev my-api`

‚Äî –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ–µ–∫—Ç:
1. `docker compose up -d --build`
2. `workon existing-app`
3. `composer install && php artisan key:generate`
4. `db-ensure existing-app` (–∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ—ë –∏–º—è –ë–î)
5. `dev existing-app`

## –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –ü–æ—Å—Ç—Ä–æ–∏—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å workspace: `docker compose build workspace`
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã: `docker compose up -d`
- –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å—ë: `docker compose down` (–¥–∞–Ω–Ω—ã–µ –ë–î —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `mysql_data`)

## –¢–æ–Ω–∫–æ—Å—Ç–∏ –∏ —Å–æ–≤–µ—Ç—ã
- –ü–æ—Ä—Ç—ã: –µ—Å–ª–∏ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å —Å–≤–æ–±–æ–¥–Ω—ã—Ö, –∫–æ–º–∞–Ω–¥—ã —Å–æ–æ–±—â–∞—Ç –æ–± –æ—à–∏–±–∫–µ ‚Äî —Ä–∞—Å—à–∏—Ä—å—Ç–µ `APP_PORT_RANGE`/`VITE_PORT_RANGE` –≤ devbox/.env
- –ü–æ—Ä—Ç—ã: Docker –º–æ–∂–µ—Ç ¬´–∑–∞–Ω–∏–º–∞—Ç—å¬ª –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Ä—Ç—ã —á–µ—Ä–µ–∑ `docker-proxy`. –°–∫—Ä–∏–ø—Ç—ã —É—á–∏—Ç—ã–≤–∞—é—Ç —ç—Ç–æ –∏ —Å—á–∏—Ç–∞—é—Ç —Ç–∞–∫–∏–µ –ø–æ—Ä—Ç—ã –ø—Ä–∏–≥–æ–¥–Ω—ã–º–∏. –ï—Å–ª–∏ —Ä–µ–∞–ª—å–Ω–æ –ø–æ—Ä—Ç –∑–∞–Ω—è—Ç —Å—Ç–æ—Ä–æ–Ω–Ω–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º ‚Äî –∏–∑–º–µ–Ω–∏—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω `APP_PORT_RANGE`/`VITE_PORT_RANGE` –∏–ª–∏ –æ—Å–≤–æ–±–æ–¥–∏—Ç–µ –ø–æ—Ä—Ç.
 - –ü–æ—Ä—Ç—ã: –µ—Å–ª–∏ `ss -p`/`lsof` –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∏–º–µ–Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –±–µ–∑ sudo –∏ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –ø–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã, –Ω–æ devbox —É–∂–µ –ø–æ–¥–Ω—è—Ç ‚Äî —Å–∫—Ä–∏–ø—Ç—ã –≤—Å—ë —Ä–∞–≤–Ω–æ –≤—ã–±–µ—Ä—É—Ç –ø–æ—Ä—Ç –∏–∑ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞, —Ç.–∫. –µ–≥–æ —Å–ª—É—à–∞–µ—Ç `docker-proxy` –∏ –æ–Ω –ø—Ä–∏–≥–æ–¥–µ–Ω –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.
- –ü—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª—ã: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ–¥ –≤–∞—à–∏–º UID/GID (`user: "${UID:-1000}:${GID:-1000}"`), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å `root`‚Äë—Ñ–∞–π–ª–æ–≤
 - –ü—Ä–∞–≤–∞ npm‚Äë–∫—ç—à–∞: –µ—Å–ª–∏ –≤–∏–¥–∏—Ç–µ `npm ERR! EACCES` –ø—Ä–æ `/home/dev/.npm`, —Å–∫—Ä–∏–ø—Ç—ã `npm`/`vite` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–∏–Ω—è—Ç –ø—Ä–∞–≤–∞ (`chown` –∫—ç—à‚Äë—Ç–æ–º–∞). –ü—Ä–∏ –∫—Ä–∞–π–Ω–µ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –≤—Ä—É—á–Ω—É—é: `docker compose exec -u 0 workspace chown -R 1000:1000 /home/dev/.npm`
- –ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–µ–∫—Ç–æ–≤: devbox –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫, —É –∫–∞–∂–¥–æ–≥–æ ‚Äî —Å–≤–æ–π –ø–æ—Ä—Ç –∏–∑ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
- –ë—ç–∫–µ–Ω–¥ –±–µ–∑ Vite: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ `serve`, –ª–∏–±–æ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ —Å–≤–æ–π —Å–µ—Ä–≤–µ—Ä —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –≤ `workon`

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
- ¬´–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–Ω–∏–º–∏ devbox‚Ä¶¬ª: –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –∫–æ—Ä–Ω–µ devbox `docker compose up -d --build`
- –ü–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã: —Ä–∞—Å—à–∏—Ä—å—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ –ø–æ—Ä—Ç –≤—Ä—É—á–Ω—É—é: `serve app 8010`, `vite app 5178`
- –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `.env` –ø—Ä–æ–µ–∫—Ç–∞ (`DB_HOST=mysql`, –ø–æ—Ä—Ç 3306) –∏ —á—Ç–æ `db-ensure` —Å–æ–∑–¥–∞–≤–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/–ø—Ä–∞–≤–∞
- Xdebug –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ IDE —Å–ª—É—à–∞–µ—Ç 9003, –∞ `host.docker.internal` –¥–æ—Å—Ç—É–ø–µ–Ω; –Ω–∞ Linux —ç—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ —á–µ—Ä–µ–∑ `extra_hosts`
- Node/PHP –≤–µ—Ä—Å–∏—è: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `use-node`/`use-php`, –∑–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ workspace
- Laravel –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ `artisan serve`:
  - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –ø—Ä–æ–µ–∫—Ç–∞: `bin/workon <project>` –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å –æ–±–æ–ª–æ—á–∫—É –≤ `/var/www/<project>`.
  - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å `artisan` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `composer install`, –∑–∞—Ç–µ–º `php artisan key:generate`.
  - –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ `artisan serve` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ, devbox –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç fallback `php -S 0.0.0.0:<port> -t public public/index.php`.
  - –õ–æ–≥–∏: `bin/logs <project> serve`. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫: `bin/stop <project> && bin/dev <project>`.

## –ì–¥–µ —á—Ç–æ –ª–µ–∂–∏—Ç –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- –ü—Ä–æ–µ–∫—Ç—ã: `/var/www/<project>` (–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –∏–∑ `HOST_PROJECTS_DIR`)
- –ö—ç—à Composer: `/tmp/composer`
- –ö—ç—à npm: `/home/dev/.npm`
- –õ–æ–≥–∏ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤: `/tmp/serve-*.log`, `/tmp/vite-*.log`
 - –õ–æ–≥–∏ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤: –Ω–∞ —Ö–æ—Å—Ç–µ –≤ `./logs`, –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ ‚Äî `/var/log/devbox` (`serve-*.log`, `vite-*.log`)

–ü—Ä–∏—è—Ç–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏! üöÄ
